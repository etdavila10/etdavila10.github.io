---
/*
 * Accordion panel. Single element of an Accordion
 */

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<div>
  <button
    class="accordion p-6 w-full text-left font-display
    text-2xl transition after:content-['+']
    after:float-right hover:bg-grey-50"
    >{title}</button
  >
  <div class="my-6 px-12 max-h-0 overflow-hidden transition-all duration-500">
    <div>
      <slot />
    </div>
  </div>
</div>

<style>
  .active:after {
    content: "\2212";
  }
</style>

<script>
  let acc = document.getElementsByClassName("accordion");

  for (let i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function () {
      let activeSections = document.getElementsByClassName("active");
      if (activeSections.length != 0 && !this.isEqualNode(activeSections[0])) {
        let activeSection = activeSections[0];
        activeSection.classList.toggle("active");
        let activePanel = activeSection.nextElementSibling;
        activePanel.style.maxHeight = null;
      }
      this.classList.toggle("active");
      let panel = this.nextElementSibling;
      if (panel.style.maxHeight) {
        panel.style.maxHeight = null;
      } else {
        panel.style.maxHeight = panel.scrollHeight + "px";
      }
    });
  }
</script>
